<html>
<head>
    <script src="./main.js"></script>
<script>

    

    function getProgram() 
    {
        let ret = {
            statements : [
                { action : "fd", params : [50]},
                { action : "rt", params : [90]},
                { action : "fd", params : [50]},
                { action : "rt", params : [90]},
                { action : "fd", params : [50]},
                { action : "rt", params : [90]},
                { action : "fd", params : [50]},
                { action : "rt", params : [90]},

                { action: "rt", params: [45]},

                {
                    action : "loop",
                    iterations : 5,
                    statements : [
                            {
                                action : "loop",
                                iterations : 4,
                                statements : [
                                    { action : "fd", params : [50]},
                                    { action : "rt", params : [95]},
                                ]
                            },
                            { action : "rt", params : [45]}
                    ]
                }
            ]
        }
        return ret;
    }

    function drawProgram(program)
    {
        program.statements.forEach(st => painter.processStatement(st))
    }

    var painter;

    function init()
    {
        let drawingBoard = document.getElementById('drawing')
        painter = main.newPainter(drawingBoard,100,100,0)
        
    }

    function parseAndExecuteProgram()
    {
        clearDrawing();
        let code = document.getElementById('programCode').value;
        let program = main.parseCode(code);
        drawProgram (program)

    }

    function clearDrawing()
    {
        painter.empty();
    }

</script>
</head>

<body onload="init()">

    <div id="drawing" width="100%" style="border:1px solid black;height:50%"></div>
    <hr/>
    <h3>Program</h3>
    <textarea id="programCode" style="width:80%;height:400px"></textarea>
    <input type="button" value="Execute" onclick="parseAndExecuteProgram()" />
</body>
</html>